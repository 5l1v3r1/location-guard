#!/bin/bash

set -e

DIST=dist

case "$1" in
    chrome)
        mkdir -p $DIST
        cp -r src/chrome $DIST/chrome
        cp -r src/common/{external,html,images} $DIST/chrome
        cp -r src/common/js/* $DIST/chrome/js/
        ;;
    firefox)
        mkdir -p $DIST
        cp -r src/firefox $DIST/firefox
        cp -r src/common/{external,images,js} $DIST/firefox/data/
        cp -r src/common/html/* $DIST/firefox/data/
        cp -r $DIST/firefox/lib/browser.js $DIST/firefox/data/js/
        cp -r src/common/js/{browser_base,util}.js $DIST/firefox/lib/
        # main??
        #cp -r common/js/main.js  firefox-addon/lib/
        ;;
    clean)
        rm -rf $DIST
        ;;
    *)
        echo use deploy {chrome,firefox,clean}
esac